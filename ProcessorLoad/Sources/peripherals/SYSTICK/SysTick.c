#include "SYSTICK/systick.h"

extern uint32_t currTicksCounter, prevTicksCounter;

void SysTick_Init(uint32_t reload)
{
	/* SYST_CSR: ??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,COUNTFLAG=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,CLKSOURCE=0,TICKINT=0,ENABLE=0 */
	SYST_CSR = 0x00U;

	/* SYST_RVR: ??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,RELOAD=0x3E80 */
	SYST_RVR = SysTick_RVR_RELOAD( reload );	//1 ms

	/* SYST_CVR: ??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,CURRENT=0 */
	SYST_CVR = SysTick_CVR_CURRENT( 0x00 );

	/* SYST_CSR: ??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,COUNTFLAG=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,??=0,CLKSOURCE=1,TICKINT=1,ENABLE=1 */
	SYST_CSR = SysTick_CSR_CLKSOURCE_MASK |
	        SysTick_CSR_TICKINT_MASK |
	        SysTick_CSR_ENABLE_MASK;
}

void SysTick_Handler(void)
{
	currTicksCounter++;
}


